<html>
  <div>Status: <span id="status">???</span></div>
  <iframe id="iframe" style="height: 100%; width: 100%" class="payform__iframe"></iframe>
</html>

<script>
  const iframeEl = document.getElementById('iframe');
  const statusEl = document.getElementById('status');

  statusEl.textContent = 'Fake XHR loading...';

  fetch('/api.json').then((res) => {
    statusEl.textContent = 'Additional timeout...';

    setTimeout(() => {
      statusEl.textContent = 'Loading payform...';

      iframeEl.src = res.reference.urls.redirect;
      iframeEl.onload = () => {
        statusEl.textContent = 'Payform loaded';
      };
    }, 800);
  });
</script>
